---
import type { CollectionEntry } from "astro:content";
import { Image } from "astro:assets";

type Props = {
  post: CollectionEntry<"blog">;
};

const { post } = Astro.props;

const formatDate = (d: Date) =>
  new Date(d).toLocaleDateString("en-US", { year: "numeric", month: "long", day: "numeric", timeZone: "UTC" });
---

<article class="overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-soft">
  <a href={`/blog/${post.slug}/`} class="grid no-underline lg:grid-cols-2">
    <div class="aspect-video bg-slate-100 overflow-hidden">
      {post.data.heroImage && (
        <Image
          src={post.data.heroImage}
          alt={post.data.heroImageAlt ?? post.data.title}
          loading="eager"
          width={1200}
          height={750}
          class="h-full w-full object-cover"
        />
      )}
      <div class="absolute inset-0 bg-linear-to-t from-slate-900/25 via-transparent to-transparent" />
    </div>

    <div class="p-6 sm:p-8 lg:flex lg:flex-col lg:justify-center">
      <div class="flex flex-wrap items-center gap-2">
        <span class="inline-flex items-center rounded-full bg-brand-50 px-3 py-1 text-xs font-semibold text-brand-800 ring-1 ring-brand-700/15">
          Featured
        </span>
        <span class="text-xs uppercase tracking-wide text-brand-700">
          {post.data.category ?? "Blog"}
        </span>
        <span class="text-xs text-slate-500">â€¢</span>
        <time class="text-xs text-slate-500" datetime={new Date(post.data.pubDate).toISOString()}>
          {formatDate(post.data.pubDate)}
        </time>
      </div>

      <h2 class="mt-3 text-2xl font-bold tracking-tight text-slate-900 sm:text-3xl">
        {post.data.title}
      </h2>

      <p class="mt-3 text-sm leading-6 text-slate-600 max-w-prose">
        {post.data.description}
      </p>

      <div class="mt-5 inline-flex items-center gap-2 text-sm font-semibold text-brand-700">
        Read article
        <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <path d="M9 18l6-6-6-6" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </div>
    </div>
  </a>
</article>
