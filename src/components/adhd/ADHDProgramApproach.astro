---
import { ClipboardCheck, Leaf, HeartPulse, MessagesSquare } from "lucide-astro";
---

<section class="bg-slate-50 border-y border-slate-200">
  <div class="mx-auto max-w-7xl px-4 py-10 md:py-10">
    <div class="max-w-3xl">
      <h2 class="text-2xl font-extrabold tracking-tight text-slate-900 sm:text-3xl">
        What the Program Includes
      </h2>
      <p class="mt-3 text-base leading-7 text-slate-700">
        A structured, individualized plan designed to support attention, emotional regulation, learning, and family routines.
      </p>
    </div>

    <div
      class="
        approach-slider
        relative mt-10
        -mx-4 px-4
        flex gap-4 overflow-x-auto pb-2
        snap-x snap-mandatory scroll-px-4
        approach-no-scrollbar
        sm:mx-0 sm:px-0 sm:overflow-visible sm:pb-0
        sm:grid sm:grid-cols-2 sm:gap-5
        lg:grid-cols-4
      "
    >
      {[
        {
          title: "Assessment & plan",
          desc: "A thorough evaluation and personalized roadmap for next steps.",
          Icon: ClipboardCheck,
        },
        {
          title: "Lifestyle supports",
          desc: "Sleep, nutrition, movement, and stress regulation strategies.",
          Icon: Leaf,
        },
        {
          title: "Monitoring & follow-up",
          desc: "Track progress, adjust plan, and coordinate care when needed.",
          Icon: HeartPulse,
        },
        {
          title: "Family guidance",
          desc: "Practical coaching to support routines and school-life balance.",
          Icon: MessagesSquare,
        },
      ].map(({ title, desc, Icon }) => (
        <article class="snap-start min-w-[80%] sm:min-w-0 rounded-2xl border border-slate-200 bg-white p-5 shadow-soft">
          <div class="flex items-start gap-4">
            <div class="flex h-12 w-12 items-center justify-center rounded-xl bg-brand-50 ring-1 ring-brand-700/15">
              <Icon class="h-6 w-6 text-brand-700" stroke-width="1.75" aria-hidden="true" />
            </div>
            <div>
              <h3 class="text-sm font-semibold text-slate-900">{title}</h3>
              <p class="mt-1 text-sm leading-6 text-slate-600">{desc}</p>
            </div>
          </div>
        </article>
      ))}
    </div>
    <div
      class="approach-pagination flex justify-center gap-3 mt-6 sm:mt-10"
    >
      {Array.from({ length: 4 }).map((_, i) => (
        <button
          class="dot w-3 h-3 bg-slate-300 rounded-full"
          aria-label={`Go to slide ${i + 1}`}
        ></button>
      ))}
    </div>
    

    <!-- <div class="mt-10 max-w-3xl rounded-2xl border border-slate-200 bg-white p-6">
      <h3 class="text-sm font-semibold text-slate-900">About medication</h3>
      <p class="mt-2 text-sm leading-6 text-slate-700">
        When medication is considered, we discuss benefits, tradeoffs, and alternatives clearly. The goal is thoughtful decision-makingâ€”never a one-size-fits-all approach.
      </p>
    </div> -->
  </div>

  <script>
    const slider = document.querySelector(".approach-slider");
    const dots = Array.from(
      document.querySelectorAll(".approach-pagination .dot")
    );

    if (slider && dots.length) {
      const slides = slider.children;

      const updateDots = () => {
        const scrollLeft = slider.scrollLeft;
        const slideWidth = (slides[0] as HTMLElement).offsetWidth + 16; // card + gap
        const index = Math.round(scrollLeft / slideWidth);

        dots.forEach((dot, i) =>
          dot.classList.toggle("is-active", i === index)
        );
      };

      slider.addEventListener("scroll", () => {
        window.requestAnimationFrame(updateDots);
      });

      dots.forEach((dot, i) => {
        dot.addEventListener("click", () => {
          slider.scrollTo({
            left: i * ((slides[0] as HTMLElement).offsetWidth + 16),
            behavior: "smooth",
          });
        });
      });
    }
  </script>
</section>
